<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FlorianMezzo.Controls.AnalyzerTools.BatteryDischarge">



    <Grid 
        x:Name="content" 
        ColumnSpacing="20"
        HorizontalOptions="FillAndExpand"
        VerticalOptions="FillAndExpand">
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="graphContainer" Width="*" />
            <ColumnDefinition x:Name="dataTableContainer" Width="*" />
        </Grid.ColumnDefinitions>

        
        <!-- Left View (Graph) -->
        <Border
            Grid.Column="0"
            HorizontalOptions="FillAndExpand"
            VerticalOptions="Center"
            StrokeShape="RoundRectangle 10"
            Stroke="White"
            StrokeThickness="3">

            <Grid RowDefinitions="Auto, Auto">

                <GraphicsView x:Name="ChartView"
                      Drawable="{x:StaticResource LineChartDrawable}"
                      HeightRequest="300"
                      WidthRequest="400"
                      Grid.Row="0"/>

                <Label
                    x:Name="averageNumDisplay"
                    Grid.Row="1"
                    Text="Average: --"
                    Style="{StaticResource SubHeadline}"
                    VerticalOptions="End"
                    FontSize="28"
                    TextColor="White"
                    SemanticProperties.HeadingLevel="Level2"/>
            </Grid>
        </Border>

        <!-- Right View (Data Tables) -->
        <Border
            Grid.Column="1"
            HorizontalOptions="FillAndExpand"
            VerticalOptions="Center"
            StrokeShape="RoundRectangle 10"
            Stroke="White"
            StrokeThickness="3">
            <Grid
                Padding="10"
                VerticalOptions="CenterAndExpand"
                RowDefinitions="500,Auto">

                <!-- Table display -->
                <!-- Table -->
                <ScrollView Grid.Row="0"
                    Orientation="Vertical"
                    HorizontalOptions="Center"
                    VerticalOptions="FillAndExpand"
                    Padding="10"
                    BackgroundColor="{StaticResource Secondary}">
                    <Border Grid.Column="1"
                        StrokeShape="RoundRectangle 10"
                        HorizontalOptions="Center">
                        <Grid 
                            x:Name="SessionDataGrid"
                            Grid.Column="1"
                            VerticalOptions="FillAndExpand"
                            HorizontalOptions="Center"
                            BackgroundColor="{StaticResource Secondary}"/>
                    </Border>
                </ScrollView>

                <!-- Table Footer -->
                <Grid Grid.Row="1"
                      VerticalOptions="CenterAndExpand"
                      ColumnDefinitions="*, *, *">
                    <!-- Left selector -->
                    <Border
                        Grid.Column="0"
                        x:Name="leftSelector"
                        HeightRequest="60" 
                        WidthRequest="60" 
                        BackgroundColor="Transparent" 
                        Padding="10"
                        VerticalOptions="Center"
                        HorizontalOptions="Center"
                        Margin="10"
                        IsVisible="False">
                        <Image 
                            Source="less_than.png" 
                            HeightRequest="10" 
                            WidthRequest="10" 
                            VerticalOptions="Center" 
                            HorizontalOptions="Center" />
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Tapped="switchToPastSession"/>
                        </Border.GestureRecognizers>
                    </Border>
                
                    <!-- Label -->
                    <VerticalStackLayout Grid.Column="1"
                        VerticalOptions="Center">
                        <Label
                            x:Name="sessionNum"
                            Text="Session 1"
                            Style="{StaticResource SubHeadline}"
                            VerticalOptions="Center"
                            FontSize="28"
                            SemanticProperties.HeadingLevel="Level2"/>
                    </VerticalStackLayout>
                
                    <!-- Right selector -->
                    <Border
                        Grid.Column="2"
                        x:Name="rightSelector"
                        HeightRequest="50" 
                        WidthRequest="50" 
                        BackgroundColor="Transparent" 
                        Padding="10"
                        VerticalOptions="Center"
                        HorizontalOptions="Center"
                        Margin="10"
                        IsVisible="True">   
                        <Image 
                            Source="greater_than.png"
                            HeightRequest="10" 
                            WidthRequest="10" 
                            VerticalOptions="Center" 
                            HorizontalOptions="Center"/>
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Tapped="switchToNextSession"/>
                        </Border.GestureRecognizers>
                    </Border>
                </Grid>
            </Grid>
        </Border>
        

    </Grid>
        
</ContentView>
